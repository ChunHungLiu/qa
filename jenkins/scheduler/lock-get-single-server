#!/usr/bin/env python

from getters import wait_for_first
import sys

if len(sys.argv) > 0:
    pool = sys.argv[1]
else:
    pool = ""

def is_server_in_pool(item):
    try:
        return bool(item.get("POOL", "") == pool)
    except:
        return False


server_data, lock = wait_for_first(is_server_in_pool)

for item in server_data.items():
    print '%s=%s' % item

print "LOCK=%s" % lock
